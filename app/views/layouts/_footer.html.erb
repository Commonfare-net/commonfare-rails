<%# see http://getbootstrap.com/docs/4.0/examples/sticky-footer-navbar/ %>
<footer class="footer">
  <div class="container">
    <div class="row pt-2">
      <div class="col left-links">
        <div class="dropdown d-inline float-right">
          <a href="#" id="footerDropdownMenuLink" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <%= I18n.locale.to_s.upcase %>
          </a>
          <div class="dropdown-menu" aria-labelledby="footerDropdownMenuLink">
            <% begin %>
            <% other_locales.each do |locale| %>
            <%= link_to "#{locale.to_s.upcase} - #{localised_language_name(locale, locale)}", { locale: locale, story_locale: @story_locale }, class: 'dropdown-item' %>
            <% end %>
            <% rescue ActionController::UrlGenerationError %>
            <%= link_to _('Homepage'), root_path, class: 'dropdown-item' %>
            <% end %>
          </div>
        </div>
        <p>
          <small>Commonfare.net <%= Time.now.year %></small>
          <small><%= mail_to "info@commonfare.net" %></small>
        </p>
        <div>
          <small><%= link_to s_("Footer|About"), page_path(id: 'about') %></small> |
          <small><%= link_to s_("Footer|Terms of Service"), page_path(id: 'tos') %></small> |
          <small><%= link_to s_("Footer|Privacy"), page_path(id: 'privacy') %></small>
        </div>
      </div>
    </div>
  </div>
</footer>

<%= content_for :scripts do %>
<script type="text/javascript">
  $(".footer").inViewport(function(px) {
    // console.log( px ); // `px` represents the amount of visible height
    $('.app-fab--absolute').css('bottom', 'calc(1rem + ' + px + 'px)');
  }); // Here you can chain other jQuery methods to your selector
</script>
<% end %>
