<% content_for :title, 'Commonplace' %>

<h1>Commonplace</h1>
<hr>
<div class="row">
  <div class="col">
    <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
      <li class="nav-item">
        <a class="nav-link active" id="pills-listings-tab" data-toggle="pill" href="#pills-listings" role="tab" aria-controls="pills-listings" aria-selected="true"><%= _('Latest listings') %></a>
      </li>
      <% if user_signed_in? %>
        <li class="nav-item">
          <a class="nav-link" id="pills-my_listings-tab" data-toggle="pill" href="#pills-my_listings" role="tab" aria-controls="pills-my_listings" aria-selected="false"><%= _('My Listings') %></a>
        </li>
      <% end %>
    </ul>
    <div class="tab-content" id="pills-tabContent">
      <div class="tab-pane fade show active" id="pills-listings" role="tabpanel" aria-labelledby="pills-listings-tab">
        <% if @listings.any? %>
          <%= render @listings %>
        <% else %>
        <div class="row justify-content-center">
          <div class="col text-center">
            <h2 class="text-muted">
              <%= _("No Listings yet") %>
            </h2>
          </div>
        </div>
        <% end %>
      </div>
      <% if user_signed_in? %>
        <div class="tab-pane fade" id="pills-my_listings" role="tabpanel" aria-labelledby="pills-my_listings-tab">
          <div class="row mb-2">
            <div class="col">
              <%= link_to s_('Button|New listing'), new_listing_path, class: 'btn btn-outline-cf btn-block' if can? :create, Listing  %>
            </div>
          </div>
          <% if current_user.meta.listings.any? %>
          <div class="row">
            <div class="col">
                <%= render current_user.meta.listings %>
            </div>
          </div>
          <% else %>
          <div class="row justify-content-center">
            <div class="col text-center">
              <h2 class="text-muted">
                <%= _("No listings") %>
              </h2>
            </div>
          </div>
          <% end %>
        </div>
      <% end %>
    </div>
  </div>
</div>
